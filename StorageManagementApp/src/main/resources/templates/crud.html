<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html>
<head>
<meta charset="UTF-8">
<title>Storage Management App</title>
<link rel="stylesheet" th:href="@{/css/layer.css}" type="text/css">
<link rel="stylesheet" href="js/jzaefferer-jquery-treeview-ea4fd39/jquery.treeview.css">
<link rel="icon" href="data:,">
<script type="text/javascript" src="js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="js/jzaefferer-jquery-treeview-ea4fd39/jquery.treeview.js"></script>
<script type="text/javascript" src="js/jzaefferer-jquery-treeview-ea4fd39/jquery.treeview.async.js"></script>

<style type="text/css">
div.inline-block{
	display: inline-block;
}
.displayBox{
height:300px;
width:300px;
position:absolute;
top:20%;
left:50%;
margin-top:-100px;
margin-left:-250px;
border:solid 1px #666666;
}

</style>
</head>
<body>
	<h1>収納管理アプリ</h1>
	
	<div class = "inline-block">
		<div>
			<ul id="tree"></ul>
		</div>
		
		<div>
			<div class = "displayBox">
					<form method = "POST" th:object = "${itemForm}">
						<lable>名称：</lable>
						<input id = "itemName" type = "text" th:field = "*{name}">
					</form>
			</div>
		</div>
	</div>

</body>
</html>

<script>
	window.onload = function() {
		updateTree();
	};
	function updateTree(){
	    $("#tree").empty();
	    $("#tree").unbind();
	    $("#tree").treeview({
	      tree: 100,
	      url: "storage_app/tree" 
		});
	}
	
	function getItem(id){
		// Ajax通信テスト ボタンクリック
		$.ajax({
			type		: "GET",
			url			: "storage_app/" + id,
			dataType	: "string",
			success		: function(data) {
							success(data);
						},
			error		: function(XMLHttpRequest, textStatus, errorThrown) {
							error(XMLHttpRequest, textStatus, errorThrown);
						}
		});
	};
	
	// Ajax通信成功時処理
	function success(data) {
		alert("success:" + data);
	
		document.getElementById("itemName").value = data;
	}
	
	// Ajax通信失敗時処理
	function error(XMLHttpRequest, textStatus, errorThrown) {
		alert("error:" + XMLHttpRequest);
		alert("status:" + textStatus);
		alert("errorThrown:" + errorThrown);
	}
</script>


